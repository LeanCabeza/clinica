<div class="fondo">
  <div id="shadow" class="contenedor scale-in-center">
    <div>
      <h1 class="text">
        <b>Registrar</b>
        <hr>
      </h1>

      <a *ngIf="showButtons" class="registerButton" (click)="showButtons = false; showForms = true; this.tipo ='Paciente'">
        <img src="/assets/images/paciente.png" alt="Paciente" class="button-icon">
      </a>
      
      <a *ngIf="showButtons" class="registerButton" (click)="showButtons = false; showForms = true; this.tipo ='Especialista'">
        <img src="/assets/images/doctor.png" alt="Especialista" class="button-icon">
      </a>
      
      <a *ngIf="this.flagAdmin == true && showButtons" class="registerButton" (click)="showButtons = false; showForms = true; this.tipo ='Admin'">
        <img src="/assets/images/admin.png" alt="Admin" class="button-icon">
      </a>



      <form *ngIf="showForms && tipo == 'Paciente'" [formGroup]="usuarioForm">        
        <div class="row">
          <div class="col">
            <label>Nombre</label>
            <input type="text" class="form-control" placeholder="Tu Nombre" formControlName="nombre">
            <div *ngIf="usuarioForm.get('nombre')?.hasError('required') && usuarioForm.get('nombre')?.touched"
              class="error-message">
              El campo Nombre es requerido.
            </div>
            <div *ngIf="usuarioForm.get('nombre')?.hasError('minlength') && usuarioForm.get('nombre')?.touched"
              class="error-message">
              El campo Nombre debe tener al menos 2 caracteres.
            </div>
          </div>
          <div class="col">
            <label>Apellido</label>
            <input type="text" class="form-control" placeholder="Tu Apellido" formControlName="apellido">
            <div *ngIf="usuarioForm.get('apellido')?.hasError('required') && usuarioForm.get('apellido')?.touched"
              class="error-message">
              El campo Apellido es requerido.
            </div>
            <div *ngIf="usuarioForm.get('apellido')?.hasError('minlength') && usuarioForm.get('apellido')?.touched"
              class="error-message">
              El campo Apellido debe tener al menos 2 caracteres.
            </div>
          </div>
          <div>
            <label>Email</label>
            <input type="email" class="form-control" placeholder="email@ejemplo.com" formControlName="email">
            <div *ngIf="usuarioForm.get('email')?.hasError('required') && usuarioForm.get('email')?.touched"
              class="error-message">
              El campo Email es requerido.
            </div>
            <div *ngIf="usuarioForm.get('email')?.hasError('email') && usuarioForm.get('email')?.touched"
              class="error-message">
              Ingresa un correo electrónico válido.
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label>Edad</label>
            <input type="number" class="form-control" placeholder="18" formControlName="edad">
            <div *ngIf="usuarioForm.get('edad')?.hasError('required') && usuarioForm.get('edad')?.touched"
              class="error-message">
              El campo Edad es requerido.
            </div>
            <div *ngIf="usuarioForm.get('edad')?.hasError('minlength') && usuarioForm.get('edad')?.touched"
              class="error-message">
              La edad debe ser mayor o igual a 18.
            </div>
          </div>
          <div class="col">
            <label>DNI</label>
            <input type="number" class="form-control" placeholder="44555333" formControlName="dni">
            <div *ngIf="usuarioForm.get('dni')?.hasError('required') && usuarioForm.get('dni')?.touched"
              class="error-message">
              El campo DNI es requerido.
            </div>
            <div *ngIf="usuarioForm.get('dni')?.hasError('minlength') && usuarioForm.get('dni')?.touched"
              class="error-message">
              El DNI debe tener al menos 6 caracteres.
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label>Contraseña</label>
            <input type="password" class="form-control" placeholder="Contraseña" formControlName="password">
            <div *ngIf="usuarioForm.get('password')?.hasError('required') && usuarioForm.get('password')?.touched"
              class="error-message">
              El campo Contraseña es requerido.
            </div>
            <div *ngIf="usuarioForm.get('password')?.hasError('minlength') && usuarioForm.get('password')?.touched"
              class="error-message">
              La contraseña debe tener al menos 6 caracteres.
            </div>
          </div>
          <div class="col">
            <label>Obra Social</label>
            <select class="form-control" formControlName="obraSocial">
              <option>Osde</option>
              <option>SwissMedical</option>
              <option>Galeno</option>
              <option>OSECAC</option>
              <option>Sancor</option>
            </select>
          </div>

          <div>
            <label for="exampleFormControlFile1">Foto</label>
            <br>
            <input type="file" class="form-control-file" id="exampleFormControlFile1"
              (change)="onFileSelected1($event)">
          </div>
          <div>
            <label for="exampleFormControlFile2">Foto2</label>
            <br>
            <input type="file" class="form-control-file" id="exampleFormControlFile2"
              (change)="onFileSelected2($event)">
          </div>
        </div>

        <div class="position-absolute bottom-0 end-0 p-4">
          <button class="registerBtn" (click)="registrarPaciente()" [disabled]="!usuarioForm.valid">
            Registrar Paciente
          </button>
        </div>
      </form>

      <form *ngIf="showForms && tipo == 'Especialista'" [formGroup]="especialistaForm">

        <div class="row">
          <div class="col">
            <label>Nombre</label>
            <input type="text" class="form-control" placeholder="Tu Nombre" formControlName="nombre">
            <div *ngIf="especialistaForm.get('nombre')?.hasError('required') && especialistaForm.get('nombre')?.touched"
              class="error-message">
              El campo Nombre es requerido.
            </div>
            <div *ngIf="especialistaForm.get('nombre')?.hasError('minlength') && especialistaForm.get('nombre')?.touched"
              class="error-message">
              El campo Nombre debe tener al menos 2 caracteres.
            </div>
          </div>
          <div class="col">
            <label>Apellido</label>
            <input type="text" class="form-control" placeholder="Tu Apellido" formControlName="apellido">
            <div *ngIf="especialistaForm.get('apellido')?.hasError('required') && especialistaForm.get('apellido')?.touched"
              class="error-message">
              El campo Apellido es requerido.
            </div>
            <div *ngIf="especialistaForm.get('apellido')?.hasError('minlength') && especialistaForm.get('apellido')?.touched"
              class="error-message">
              El campo Apellido debe tener al menos 2 caracteres.
            </div>
          </div>
          <div>
            <label>Email</label>
            <input type="email" class="form-control" placeholder="email@ejemplo.com" formControlName="email">
            <div *ngIf="especialistaForm.get('email')?.hasError('required') && especialistaForm.get('email')?.touched"
              class="error-message">
              El campo Email es requerido.
            </div>
            <div *ngIf="especialistaForm.get('email')?.hasError('email') && especialistaForm.get('email')?.touched"
              class="error-message">
              Ingresa un correo electrónico válido.
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label>Edad</label>
            <input type="number" class="form-control" placeholder="18" formControlName="edad">
            <div *ngIf="especialistaForm.get('edad')?.hasError('required') && especialistaForm.get('edad')?.touched"
              class="error-message">
              El campo Edad es requerido.
            </div>
            <div *ngIf="especialistaForm.get('edad')?.hasError('minlength') && especialistaForm.get('edad')?.touched"
              class="error-message">
              La edad debe ser mayor o igual a 18.
            </div>
          </div>
          <div class="col">
            <label>DNI</label>
            <input type="number" class="form-control" placeholder="44555333" formControlName="dni">
            <div *ngIf="especialistaForm.get('dni')?.hasError('required') && especialistaForm.get('dni')?.touched"
              class="error-message">
              El campo DNI es requerido.
            </div>
            <div *ngIf="especialistaForm.get('dni')?.hasError('minlength') && especialistaForm.get('dni')?.touched"
              class="error-message">
              El DNI debe tener al menos 6 caracteres.
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label>Días atención</label>
            <div class="row">
              <div class="col" *ngFor="let dia of ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado']">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" [checked]="diasAtencion.includes(dia)" (change)="toggleDia(dia)">
                  <label class="form-check-label" for="flexCheckChecked">{{ dia.charAt(0) }}</label>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col">
            <label>Horarios atención</label>
            <div class="row">
              <div class="col" *ngFor="let horario of ['9:00 a 13:00', '14:00 a 18:00', '18:00 a 21:00']">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" [checked]="horariosAtencion.includes(horario)" (change)="toggleHorario(horario)">
                  <label class="form-check-label" for="flexCheckChecked">{{ horario }}</label>
                </div>
              </div>
            </div>
          </div>

        </div>


        <div class="row">
          <div class="col">
            <label>Contraseña</label>
            <input type="password" class="form-control" placeholder="Contraseña" formControlName="password">
            <div *ngIf="especialistaForm.get('password')?.hasError('required') && especialistaForm.get('password')?.touched"
              class="error-message">
              El campo Contraseña es requerido.
            </div>
            <div *ngIf="especialistaForm.get('password')?.hasError('minlength') && especialistaForm.get('password')?.touched"
              class="error-message">
              La contraseña debe tener al menos 6 caracteres.
            </div>
          </div>
          <div class="col">
            <label>Especialidad</label>
            <select class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="usuario.especialidad">
              <option>Urologo</option>
              <option>Flevologo</option>
              <option>Dermatologo</option>
              <option>Traumatologo</option>
              <option>Oculista</option>
            </select>
          </div>

          <div>
            <label for="exampleFormControlFileEspecialista">Foto</label>
            <br>
            <input type="file" class="form-control-file" id="exampleFormControlFileEspecialista"
              (change)="onFileSelected1($event)">
          </div>
        </div>



        <div class="position-absolute bottom-0 end-0 p-4">
          <a class="registerBtn" (click)="registrarEspecialista()">Registrar Especialista</a>
        </div>

      </form>

      <form *ngIf="showForms && tipo == 'Admin'" [formGroup]="adminForm">

        <div class="row">
          <div class="col">
            <label>Nombre</label>
            <input type="text" class="form-control" placeholder="Tu Nombre" formControlName="nombre">
            <div *ngIf="adminForm.get('nombre')?.hasError('required') && adminForm.get('nombre')?.touched"
              class="error-message">
              El campo Nombre es requerido.
            </div>
            <div *ngIf="adminForm.get('nombre')?.hasError('minlength') && adminForm.get('nombre')?.touched"
              class="error-message">
              El campo Nombre debe tener al menos 2 caracteres.
            </div>
          </div>
          <div class="col">
            <label>Apellido</label>
            <input type="text" class="form-control" placeholder="Tu Apellido" formControlName="apellido">
            <div *ngIf="adminForm.get('apellido')?.hasError('required') && adminForm.get('apellido')?.touched"
              class="error-message">
              El campo Apellido es requerido.
            </div>
            <div *ngIf="adminForm.get('apellido')?.hasError('minlength') && adminForm.get('apellido')?.touched"
              class="error-message">
              El campo Apellido debe tener al menos 2 caracteres.
            </div>
          </div>
          <div>
            <label>Email</label>
            <input type="email" class="form-control" placeholder="email@ejemplo.com" formControlName="email">
            <div *ngIf="adminForm.get('email')?.hasError('required') && adminForm.get('email')?.touched"
              class="error-message">
              El campo Email es requerido.
            </div>
            <div *ngIf="adminForm.get('email')?.hasError('email') && adminForm.get('email')?.touched"
              class="error-message">
              Ingresa un correo electrónico válido.
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label>Edad</label>
            <input type="number" class="form-control" placeholder="18" formControlName="edad">
            <div *ngIf="adminForm.get('edad')?.hasError('required') && adminForm.get('edad')?.touched"
              class="error-message">
              El campo Edad es requerido.
            </div>
            <div *ngIf="adminForm.get('edad')?.hasError('minlength') && adminForm.get('edad')?.touched"
              class="error-message">
              La edad debe ser mayor o igual a 18.
            </div>
          </div>
          <div class="col">
            <label>DNI</label>
            <input type="number" class="form-control" placeholder="44555333" formControlName="dni">
            <div *ngIf="adminForm.get('dni')?.hasError('required') && adminForm.get('dni')?.touched"
              class="error-message">
              El campo DNI es requerido.
            </div>
            <div *ngIf="adminForm.get('dni')?.hasError('minlength') && adminForm.get('dni')?.touched"
              class="error-message">
              El DNI debe tener al menos 6 caracteres.
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label>Contraseña</label>
            <input type="password" class="form-control" placeholder="Contraseña" formControlName="password">
            <div *ngIf="adminForm.get('password')?.hasError('required') && adminForm.get('password')?.touched"
              class="error-message">
              El campo Contraseña es requerido.
            </div>
            <div *ngIf="adminForm.get('password')?.hasError('minlength') && adminForm.get('password')?.touched"
              class="error-message">
              La contraseña debe tener al menos 6 caracteres.
            </div>
          </div>

          <div>
            <label for="exampleFormControlFileAdmin">Foto</label>
            <br>
            <input type="file" class="form-control-file" id="exampleFormControlFileAdmin"
              (change)="onFileSelected1($event)">
          </div>
        </div>



        <div class="position-absolute bottom-0 end-0 p-4">
          <a class="registerBtn" (click)="registrarAdmin()">Registrar ADMIN</a>
        </div>

      </form>

    </div>

    <div *ngIf="showSpinner" class="custom-spinner">
      <img src="/assets/images/logo1.png"/>
    </div>

  </div>